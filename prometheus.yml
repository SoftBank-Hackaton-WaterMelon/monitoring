global:
  # 수집 주기 60초 (요청 반영)
  scrape_interval: 60s
  # 룰 평가 주기 (옵션)
  evaluation_interval: 60s
  # 스크랩 타임아웃 (옵션)
  scrape_timeout: 10s

# (옵션) 외부 라벨: 여러 프로메테우스를 모을 때 구분용
# external_labels:
#   cluster: local-dev

scrape_configs:
  # 1) Prometheus 자기 자신
  - job_name: prometheus
    static_configs:
      - targets: ['prometheus:9090']
        labels:
          service: prometheus

  # 2) cAdvisor (컨테이너 리소스 메트릭)
  - job_name: cadvisor
    static_configs:
      - targets: ['cadvisor:8080']
        labels:
          service: cadvisor

  # 3) demo-backend 앱 메트릭 (/metrics)
  # 같은 compose 네트워크이므로 서비스명으로 접근
  - job_name: demo-backend
    metrics_path: /metrics               # 백엔드가 다른 경로면 변경
    static_configs:
      - targets: ['backend:8080']        # docker-compose의 backend 서비스명
        labels:
          service: demo-backend